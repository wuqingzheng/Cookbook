## 3.4 响应 iOS 中的低内存警告 - Responding to Low-Memory Warnings in iOS
**iOS** 中的虚拟内存系统不使用后备存储，而是依靠应用程序的合作来删除对对象的强引用。当可用页数低于计算的阈值时，系统会尽可能释放未修改的页面，但也可能会向当前正在运行的应用程序发送低内存通知。如果您的应用收到此通知，请注意警告。收到它后，您的应用程序必须删除对尽可能多的对象的强引用。例如，您可以使用警告来清除稍后可以重新创建的数据缓存。

**UIKit** 提供了几种接收低内存通知的方式，其中包括：

* 实现应用程序委托的`applicationDidReceiveMemoryWarning：` 方法。
* 重写自定义 **UIViewController** 子类中的 `didReceiveMemoryWarning` 方法。
* 注册以接收 `UIApplicationDidReceiveMemoryWarningNotification` 通知。

在收到任何这些通知后，您的处理程序方法应立即删除对对象的强引用。视图控制器会自动删除当前屏幕外的视图的引用，但是您还应该重写 `didReceiveMemoryWarning` 方法，并使用它删除视图控制器不需要的任何其他引用。

如果只有少数具有已知可清除资源的自定义对象，则可以让这些对象注册 `UIApplicationDidReceiveMemoryWarningNotification` 通知并在其中删除引用。但是，如果您有许多可清除的对象或想要选择性清除某些对象，则可能需要使用应用程序委托来决定保留哪些对象。

> 重要提示：与系统应用程序一样，你的应用程序应始终处理低内存警告，即使它们在测试期间没有收到这些警告。系统应用程序在处理请求时消耗少量内存。当检测到低内存条件时，系统会向所有正在运行的程序（包括您的应用程序）提供低内存警告，并可能会终止一些后台应用程序（如有必要）以缓解内存压力。 如果没有足够的内存被释放 - 可能是因为你的应用程序正在泄漏或仍然消耗太多内存 - 系统可能仍会终止你的应用程序。