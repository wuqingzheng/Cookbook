## 3.2 何时使用 Run Loop

唯一需要明确运行 **run loop** 的时候是为应用程序创建辅助线程的时候。**Runloop** 是程序主线程基础设施的关键部分。所以，**Cocoa** 和 **Carbon** 程序提供了代码运行主程序的循环并自动启动 **run loop**。**iOS** 程序中 **UIApplication** 的 **run** 方法（或*Mac OS X 中的 **NSApplication**）作为程序启动步骤的一部分，它在程序正常启动的时候就会启动程序的主循环。类似的，**RunApplicationEventLoop** 函数为 **Carbon** 程序启动主循环。如果你使用 **Xcode** 提供的模板创建你的程序，那你永远不需要自己去显式的调用这些例程。

对于辅助线程，你需要判断一个 **run loop** 是否是必须的。如果是必须的，那么你要自己配置并启动它。你不需要在任何情况下都去启动一个线程的 **run loop**。比如，你使用线程来处理一个预先定义的长时间运行的任务时，你应该避免启动 **runloop**。**Run loop** 在你要和线程有更多的交互时才需要，比如以下情况：  

* 使用端口或自定义输入源来和其他线程通信
* 使用线程的定时器
* Cocoa 中使用任何 performSelector...的方法
* 使线程周期性工作

如果你决定在程序中使用 **run loop**，那么它的配置和启动都很简单。和所有线程编程一样，你需要计划好在辅助线程退出线程的情形。让线程自然退出往往比强制关闭它更好。

关于更多介绍如何配置和退出一个 **run loop**, 参阅”使用 Run Loop 对象”的介绍。