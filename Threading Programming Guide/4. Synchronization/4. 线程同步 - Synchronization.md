# 第四章 线程同步

应用程序中多个线程的存在会引发多个执行线程安全访问资源的潜在问题。两个线程同时修改同一资源有可能以意想不到的方式互相干扰。比如：

- 一个线程可能覆盖其他线程改动的地方，
- 让应用程序进入一个未知的潜在无效状态。

幸运的话，受损的资源可能会导致明显的性能问题或崩溃，这样比较容易跟踪并修复它。不走运的话，资源受损可能导致微妙的错误，这些错误不会立即显现出来，而是很久之后才出现，或者导致其他可能需要一个底层的编码来修复的错误。

但涉及到线程安全时，一个好的设计是最好的保护。避免共享资源，并尽量减少线程间的相互作用，这样可以让它们减少互相的干扰。但是一个完全无干扰的设计是不可能的。在线程必须交互的情况下，你需要使用同步工具，来确保当它们交互的时候是安全的。

**OS X** 和 **iOS** 提供了许多同步工具供您使用，包括提供互斥访问的工具及在应用程序中正确排序事件的工具。下面各节将介绍这些工具以及如何在代码中使用它们以影响对程序资源的安全访问。