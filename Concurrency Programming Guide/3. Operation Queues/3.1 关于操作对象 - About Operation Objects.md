### 3.1 关于操作对象 - About Operation Objects
**操作对象** 是 NSOperation 类（在 Foundation 框架中）的一个实例，用于封装希望应用程序执行的工作。 NSOperation 类本身是一个抽象基类，为了做任何有用的工作，它必须被分类。 尽管是抽象的，但这个类确实提供了大量的基础设施，以尽量减少您在它自己的子类中所要完成的工作量。另外，Foundation 框架提供了两个具体的子类，您可以使用原有的代码。 表2-1 列出了这些类以及您如何使用每个类的摘要。

Table 2-1  Operation classes of the Foundation framework

Class|Description
-|:-:
NSInvocationOperation|A class you use as-is to create an operation object based on an object and selector from your application. You can use this class in cases where you have an existing method that already performs the needed task. Because it does not require subclassing, you can also use this class to create operation objects in a more dynamic fashion.<br>For information about how to use this class, see Creating an NSInvocationOperation Object.
NSBlockOperation|A class you use as-is to execute one or more block objects concurrently. Because it can execute more than one block, a block operation object operates using a group semantic; only when all of the associated blocks have finished executing is the operation itself considered finished.<br>For information about how to use this class, see Creating an NSBlockOperation Object. This class is available in OS X v10.6 and later. For more information about blocks, see Blocks Programming Topics.
NSOperation|The base class for defining custom operation objects. Subclassing NSOperation gives you complete control over the implementation of your own operations, including the ability to alter the default way in which your operation executes and reports its status.
For information about how to define custom operation objects, see Defining a Custom Operation Object.

所有操作对象都支持以下主要功能：

* 支持在操作对象之间建立基于图形（graph-based）的依赖关系。这些依赖关系会阻止给定的操作运行，直到它所依赖的所有操作都已完成运行。有关如何配置依赖关系的信息，请参阅[Configuring Interoperation Dependencies](https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW17)。
* 支持可选的完成块，该块在操作的主任务完成后执行。（仅限 OS X v10.6 及更高版本。）有关如何设置完成块的信息，请参阅[Setting Up a Completion Block](https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW33)。
* 支持使用 KVO 通知监视对操作执行状态的更改。有关如何观察 KVO 通知的信息，请参阅[Key-Value Observing Programming Guide](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177i)。
* 支持对操作进行优先级排序，从而影响其相对执行顺序。有关更多信息，请参阅 [Changing an Operation’s Execution Priority](https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW31)。
* 支持取消语义，允许您在执行时暂停操作。有关如何取消操作的信息，请参阅 [Canceling Operations](https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW39)。有关如何在自己的操作中支持取消的信息，请参阅[ Responding to Cancellation Events](https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW24)。

操作旨在帮助您提高应用程序中的并发水平。操作也是将应用程序行为组织和封装为简单离散块的好方法。您可以将一个或多个操作对象提交给一个队列，并让相应的工作在一个或多个单独的线程上异步执行，而不是在应用程序的主线程上运行一些代码。